{% from "macros/base/icons.html" import plus_icon, building_office_icon, currency_dollar_icon %}

{% macro quick_actions_buttons(buttons) %}
<div class="flex flex-col sm:flex-row gap-2 sm:gap-3">
    {% for button in buttons %}
    {% set entity_type = button['label'].split(' ')[1].lower() if button['label'].split(' ')|length > 1 else 'default' %}
    {% set btn_class = 'btn-new-' + entity_type %}
    {% if button['hx_get'] or button['hx_post'] %}
        <button {% if button['hx_get'] %}hx-get="{{ button['hx_get'] }}"{% endif %}
                {% if button['hx_post'] %}hx-post="{{ button['hx_post'] }}"{% endif %}
                {% if button['hx_target'] %}hx-target="{{ button['hx_target'] }}"{% endif %}
                {% if button['hx_swap'] %}hx-swap="{{ button['hx_swap'] }}"{% endif %}
                class="flex items-center gap-2 {{ btn_class }}">
            {{ button['icon'] }}
            {{ button['label'] }}
        </button>
    {% elif button['onclick'] %}
        <button onclick="{{ button['onclick'] }}" 
                class="flex items-center gap-2 {{ btn_class }}">
            {{ button['icon'] }}
            {{ button['label'] }}
        </button>
    {% else %}
        <a href="{{ button['url'] or '' }}" 
           class="flex items-center gap-2 {{ btn_class }}">
            {{ button['icon'] }}
            {{ button['label'] }}
        </a>
    {% endif %}
    {% endfor %}
</div>
{% endmacro %}

{% macro default_dashboard_actions() %}
{{ quick_actions_buttons([
    {
        'label': 'New Task',
        'hx_get': '/modals/Task/create',
        'hx_target': 'body',
        'hx_swap': 'beforeend',
        'icon': plus_icon('w-4 h-4')
    },
    {
        'label': 'New Company',
        'hx_get': '/modals/Company/create',
        'hx_target': 'body',
        'hx_swap': 'beforeend',
        'icon': building_office_icon('w-4 h-4')
    },
    {
        'label': 'New Opportunity',
        'hx_get': '/modals/Opportunity/create',
        'hx_target': 'body',
        'hx_swap': 'beforeend',
        'icon': currency_dollar_icon('w-4 h-4')
    }
]) }}
{% endmacro %}

{# Page-specific action button configurations #}

{% macro companies_page_actions() %}
{{ quick_actions_buttons([
    {
        'label': 'New Company',
        'hx_get': '/modals/Company/create',
        'hx_target': 'body',
        'hx_swap': 'beforeend',
        'icon': plus_icon('w-4 h-4')
    }
]) }}
{% endmacro %}

{% macro contacts_page_actions() %}
{{ quick_actions_buttons([
    {
        'label': 'New Stakeholder',
        'hx_get': '/modals/Stakeholder/create',
        'hx_target': 'body',
        'hx_swap': 'beforeend',
        'icon': plus_icon('w-4 h-4')
    }
]) }}
{% endmacro %}

{% macro opportunities_page_actions() %}
{{ quick_actions_buttons([
    {
        'label': 'New Opportunity',
        'hx_get': '/modals/Opportunity/create',
        'hx_target': 'body',
        'hx_swap': 'beforeend',
        'icon': plus_icon('w-4 h-4')
    }
]) }}
{% endmacro %}

{% macro tasks_page_actions() %}
{{ quick_actions_buttons([
    {
        'label': 'New Task',
        'hx_get': '/modals/Task/create',
        'hx_target': 'body',
        'hx_swap': 'beforeend',
        'icon': plus_icon('w-4 h-4')
    }
]) }}
{% endmacro %}