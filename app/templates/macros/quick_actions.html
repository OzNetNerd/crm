{# Quick Actions - Pure Jinja approach using entity names + concatenation #}

{% macro quick_actions_buttons(buttons) %}
<div class="flex flex-col sm:flex-row gap-2 sm:gap-3">
    {% for button in buttons %}
    {# Use button's provided classes instead of auto-generating conflicting ones #}
    {% set btn_class = button.get('classes', 'c-button c-button--entity c-button--' + (button.get('entity_type', 'user'))) %}
    {% if button['hx_get'] or button['hx_post'] %}
        <button {% if button['hx_get'] %}hx-get="{{ button['hx_get'] }}"{% endif %}
                {% if button['hx_post'] %}hx-post="{{ button['hx_post'] }}"{% endif %}
                {% if button['hx_target'] %}hx-target="{{ button['hx_target'] }}"{% endif %}
                {% if button['hx_swap'] %}hx-swap="{{ button['hx_swap'] }}"{% endif %}
                class="flex items-center gap-2 {{ btn_class }}">
            <span class="icon-{{ button.entity_type }}"></span>
            {{ button['label'] }}
        </button>
    {% else %}
        <a href="{{ button['url'] or '#' }}" 
           class="flex items-center gap-2 {{ btn_class }}">
            <span class="icon-{{ button.entity_type }}"></span>
            {{ button['label'] }}
        </a>
    {% endif %}
    {% endfor %}
</div>
{% endmacro %}

{% macro generate_dashboard_buttons(entity_names) %}
{# 
  Generate dashboard buttons from entity names - Pure Jinja approach
  
  Parameters:
  - entity_names: List of entity names (e.g., ['companies', 'tasks', 'opportunities'])
  
  Usage:
  {{ generate_dashboard_buttons(['companies', 'tasks', 'opportunities', 'stakeholders']) }}
#}
{% set buttons = [] %}
{% for entity_name in entity_names %}
    {% set singular = entity_name.rstrip('s') %}
    {% set button = {
        'label': 'New ' + singular.title(),
        'hx_get': '/modals/' + singular + '/create',
        'hx_target': 'body',
        'hx_swap': 'beforeend',
        'entity_type': singular
    } %}
    {{ buttons.append(button) or "" }}
{% endfor %}
{{ quick_actions_buttons(buttons) }}
{% endmacro %}

{% macro default_dashboard_actions() %}
{# Default dashboard buttons - Python just passes entity names #}
{{ generate_dashboard_buttons(['companies', 'tasks', 'opportunities', 'stakeholders', 'teams']) }}
{% endmacro %}

{# 
  Pure Jinja approach: Python passes simple entity names, Jinja handles:
  - Button label generation (New + singular form)
  - Modal path construction (/modals/{singular}/create)
  - Icon class generation (icon-{entity_name})
  - CSS class generation (c-button--{entity_name})
  
  No hardcoded mappings needed - everything derived from entity names!
#}