{% from "macros/entity_config.html" import entity_icons %}

{% macro quick_actions_buttons(buttons) %}
<div class="flex flex-col sm:flex-row gap-2 sm:gap-3">
    {% for button in buttons %}
    {# Use button's provided classes instead of auto-generating conflicting ones #}
    {% set btn_class = button.get('classes', 'c-button c-button--entity c-button--' + (button.get('entity_type', 'user'))) %}
    {% if button['hx_get'] or button['hx_post'] %}
        <button {% if button['hx_get'] %}hx-get="{{ button['hx_get'] }}"{% endif %}
                {% if button['hx_post'] %}hx-post="{{ button['hx_post'] }}"{% endif %}
                {% if button['hx_target'] %}hx-target="{{ button['hx_target'] }}"{% endif %}
                {% if button['hx_swap'] %}hx-swap="{{ button['hx_swap'] }}"{% endif %}
                class="flex items-center gap-2 {{ btn_class }}">
            <svg class="c-icon c-icon--sm c-icon--{{ button.entity_type }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <use href="#{{ entity_icons[button.entity_type] }}"/>
            </svg>
            {{ button['label'] }}
        </button>
    {% else %}
        <a href="{{ button['url'] or '#' }}" 
           class="flex items-center gap-2 {{ btn_class }}">
            <svg class="c-icon c-icon--sm c-icon--{{ button.entity_type }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <use href="#{{ entity_icons[button.entity_type] }}"/>
            </svg>
            {{ button['label'] }}
        </a>
    {% endif %}
    {% endfor %}
</div>
{% endmacro %}

{% macro default_dashboard_actions() %}
{{ quick_actions_buttons(get_dashboard_buttons()) }}
{% endmacro %}

{# 
  Page-specific action button macros removed - now handled by EntityConfigGenerator
  in form_configs.py for true DRY implementation. All entity pages use the 
  entity_buttons context variable generated automatically from model __entity_config__.
#}