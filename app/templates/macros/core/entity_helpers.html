{#
  Entity Helper Macros - Clean template access to entity configuration

  These macros provide simple template access to the entity configuration
  that comes from the context via UniversalContextBuilder.

  Entity configuration is now provided through context, not global functions.
#}

{#
  Entity Icon Macro - Get icon with consistent styling
  
  Parameters:
  - entity_type (required): Entity type string
  - size (optional): Icon size class (default: 'md')
  - additional_classes (optional): Extra CSS classes
  
  Usage:
  {{ entity_icon('task') }}
  {{ entity_icon('company', 'lg', 'text-blue-500') }}
#}
{% from 'macros/base/icons.html' import icon %}
{% macro entity_icon(entity_type, size='md', additional_classes='') %}
{{ icon(entity_type, size, additional_classes) }}
{% endmacro %}

{#
  Entity Label - Get singular or plural label

  Parameters:
  - entity_config (required): Entity config from context
  - plural (optional): Use plural form (default: false)
  - capitalize (optional): Capitalize first letter (default: false)

  Usage:
  {{ entity_label(entity_config) }}              → "task"
  {{ entity_label(entity_config, plural=true) }} → "tasks"
  {{ entity_label(entity_config, capitalize=true) }} → "Task"
#}
{% macro entity_label(entity_config, plural=false, capitalize=false) %}
  {%- set label = entity_config.entity_name if plural else entity_config.entity_name_singular -%}
  {{- label.title() if capitalize else label.lower() -}}
{% endmacro %}

{#
  Entity Display Name - Get properly formatted display name

  Parameters:
  - entity_config (required): Entity config from context
  - plural (optional): Use plural form (default: false)

  Usage:
  {{ entity_display_name(entity_config) }}              → "Task"
  {{ entity_display_name(entity_config, plural=true) }} → "Tasks"
#}
{% macro entity_display_name(entity_config, plural=false) %}
  {{- entity_config.entity_name if plural else entity_config.entity_name_singular -}}
{% endmacro %}

{#
  Entity Empty State Text - Get empty state configuration

  Parameters:
  - entity_config (required): Entity config from context
  - part (optional): 'title' or 'subtitle' (default: returns both)

  Usage:
  {{ entity_empty_state(entity_config, 'title') }}    → "No results found"
  {{ entity_empty_state(entity_config, 'subtitle') }} → "Try adjusting..."

  For full empty state component, use empty_state.html macro instead.
#}
{% macro entity_empty_state(entity_config, part=none) %}
  {%- if part == 'title' -%}
    No results found
  {%- elif part == 'subtitle' -%}
    Try adjusting your filters or create a new {{ entity_config.entity_name_singular.lower() }}.
  {%- else -%}
    {{ {'title': 'No results found', 'subtitle': 'Try adjusting your filters or create a new ' + entity_config.entity_name_singular.lower() + '.'} }}
  {%- endif -%}
{% endmacro %}

{#
  Quick Entity Info - Get common entity info in one macro

  Parameters:
  - entity_config (required): Entity config from context

  Returns object with: icon, singular, plural, display_name, empty_state

  Usage:
  {% set info = entity_info(entity_config) %}
  <h1>{{ info.display_name }}</h1>
  {{ icon(info.icon) }}
#}
{% macro entity_info(entity_config) %}
  {{- {
    'singular': entity_config.entity_name_singular,
    'plural': entity_config.entity_name,
    'display_name': entity_config.entity_name_singular,
    'empty_state': {
      'title': 'No results found',
      'subtitle': 'Try adjusting your filters or create a new ' + entity_config.entity_name_singular.lower() + '.'
    }
  } -}}
{% endmacro %}