{# Summary Section Macros - Metric cards and grids for dashboard and entity summaries #}

{#
  Metric Card - Individual metric display with icon and color theming
  
  Parameters:
  - title (required): Metric title text
  - value (required): Metric value (number or formatted string)
  - icon_html (optional): Icon HTML from icon macros
  - color (optional): Theme color - blue, green, yellow, purple, red, orange (default: blue)
  - additional_classes (optional): Extra CSS classes
#}
{% macro metric_card(title, value, icon_html='', color='blue', additional_classes='') %}
  {% set color_classes = {
    'blue': 'border-blue-200 bg-blue-50 text-blue-900',
    'green': 'border-green-200 bg-green-50 text-green-900', 
    'yellow': 'border-yellow-200 bg-yellow-50 text-yellow-900',
    'purple': 'border-purple-200 bg-purple-50 text-purple-900',
    'red': 'border-red-200 bg-red-50 text-red-900',
    'orange': 'border-orange-200 bg-orange-50 text-orange-900'
  } %}
  {% set theme_class = color_classes.get(color, color_classes['blue']) %}
  
  <div class="card p-6 {{ theme_class }} {{ additional_classes }}">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-sm font-medium text-opacity-75">{{ title }}</p>
        <p class="text-2xl font-bold mt-2">{{ value }}</p>
      </div>
      {% if icon_html %}
        <div class="opacity-60">{{ icon_html|safe }}</div>
      {% endif %}
    </div>
  </div>
{% endmacro %}

{#
  Metric Grid - Container for multiple metric cards
  
  Parameters:
  - cols (optional): Number of columns - 1, 2, 3, 4 (default: 4)
  - gap (optional): Grid gap size - 4, 6, 8 (default: 6)
  - additional_classes (optional): Extra CSS classes
#}
{% macro metric_grid(cols=4, gap=6, additional_classes='') %}
  {% set col_classes = {
    1: 'grid-cols-1',
    2: 'grid-cols-1 md:grid-cols-2', 
    3: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3',
    4: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-4'
  } %}
  {% set gap_class = 'gap-' + gap|string %}
  {% set col_class = col_classes.get(cols, col_classes[4]) %}
  
  <div class="grid {{ col_class }} {{ gap_class }} {{ additional_classes }}">
    {{ caller() }}
  </div>
{% endmacro %}

{#
  Status Breakdown Grid - Grid of status values with labels and colors
  
  Parameters:
  - title (optional): Grid section title
  - stats_list (required): Array of stat objects with 'value', 'label', 'value_color' keys
  - cols (optional): Number of columns (default: 4)
  - additional_classes (optional): Extra CSS classes
#}
{% macro status_breakdown_grid(title='', stats_list=[], cols=4, additional_classes='') %}
  {% set col_classes = {
    2: 'grid-cols-2',
    3: 'grid-cols-1 md:grid-cols-3', 
    4: 'grid-cols-2 md:grid-cols-4'
  } %}
  {% set col_class = col_classes.get(cols, col_classes[4]) %}
  
  <div class="{{ additional_classes }}">
    {% if title %}
      <h3 class="text-section-title mb-4">{{ title }}</h3>
    {% endif %}
    <div class="grid {{ col_class }} gap-4 items-center min-h-[80px]">
      {% for stat in stats_list %}
        <div class="text-center flex flex-col justify-center">
          <div class="text-2xl font-bold text-{{ stat.value_color }}-600">
            {{ stat.value }}
          </div>
          <div class="text-secondary">{{ stat.label }}</div>
        </div>
      {% endfor %}
    </div>
  </div>
{% endmacro %}

{#
  Simple Metric Display - Minimal metric without card styling
  
  Parameters:
  - label (required): Metric label
  - value (required): Metric value
  - value_color (optional): Value text color class (default: gray-900)
#}
{% macro simple_metric(label, value, value_color='gray-900') %}
  <div class="text-center flex flex-col justify-center">
    <div class="text-2xl font-bold text-{{ value_color }}">{{ value }}</div>
    <div class="text-secondary">{{ label }}</div>
  </div>
{% endmacro %}