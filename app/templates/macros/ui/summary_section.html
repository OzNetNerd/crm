{# Summary Section Macros - Metric cards and status breakdowns for dashboard #}

{#
  Metric Card - Display key metrics with icon and colored styling
  
  Parameters:
  - label (required): The metric label text (e.g., 'Companies', 'Tasks')
  - value (required): The metric value to display (number)
  - icon (optional): Icon HTML from icon macros
  - color (optional): Color theme - 'blue', 'green', 'yellow', 'red', 'purple', 'orange' (default: 'blue')
  
  Usage:
  {{ metric_card('Companies', 25, building_office_icon('c-icon c-icon--lg c-icon--company'), 'blue') }}
  {{ metric_card('Overdue Tasks', 3, '', 'red') }}
#}
{% macro metric_card(label, value, icon='', color='blue') %}
  {% set color_classes = {
    'blue': {
      'bg': 'bg-blue-50',
      'border': 'border-blue-200',
      'text': 'text-blue-800',
      'value': 'text-blue-900'
    },
    'green': {
      'bg': 'bg-green-50', 
      'border': 'border-green-200',
      'text': 'text-green-800',
      'value': 'text-green-900'
    },
    'yellow': {
      'bg': 'bg-yellow-50',
      'border': 'border-yellow-200', 
      'text': 'text-yellow-800',
      'value': 'text-yellow-900'
    },
    'red': {
      'bg': 'bg-red-50',
      'border': 'border-red-200',
      'text': 'text-red-800', 
      'value': 'text-red-900'
    },
    'purple': {
      'bg': 'bg-purple-50',
      'border': 'border-purple-200',
      'text': 'text-purple-800',
      'value': 'text-purple-900'
    },
    'orange': {
      'bg': 'bg-orange-50',
      'border': 'border-orange-200',
      'text': 'text-orange-800', 
      'value': 'text-orange-900'
    }
  } %}
  {% set theme = color_classes.get(color, color_classes['blue']) %}

<div class="card p-6 {{ theme.bg }} {{ theme.border }} hover:shadow-md transition-shadow duration-200">
  <div class="flex items-center">
    {% if icon %}
    <div class="flex-shrink-0 mr-4">
      {{ icon|safe }}
    </div>
    {% endif %}
    <div class="flex-1">
      <dt class="text-sm font-medium {{ theme.text }} truncate">
        {{ label }}
      </dt>
      <dd class="mt-1 text-3xl font-semibold {{ theme.value }}">
        {{ value }}
      </dd>
    </div>
  </div>
</div>
{% endmacro %}

{#
  Metric Grid - Container for displaying multiple metric cards
  
  Parameters:
  - cols (optional): Number of columns for grid (default: 4)
  - gap (optional): Gap size between cards (default: 6)
  - additional_classes (optional): Extra CSS classes
  
  Usage:
  {% call metric_grid(cols=4, gap=6) %}
    {{ metric_card('Companies', 25, '', 'blue') }}
    {{ metric_card('Tasks', 50, '', 'green') }}
  {% endcall %}
#}
{% macro metric_grid(cols=4, gap=6, additional_classes='') %}
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-{{ cols }} gap-{{ gap }} {{ additional_classes }}">
  {{ caller() }}
</div>
{% endmacro %}

{#
  Status Breakdown Grid - Display status breakdowns in a grid format
  
  Parameters:
  - title (optional): Optional title for the grid section
  - stats_list (required): List of status objects with {value, value_color, label}
  - cols (optional): Number of columns (default: 4)
  
  Usage:
  {{ status_breakdown_grid('Pipeline Stats', pipeline_stats_list, cols=4) }}
  
  Expected stats_list format:
  [
    {'value': '$25,000', 'value_color': 'green', 'label': 'Prospect'},
    {'value': '$50,000', 'value_color': 'blue', 'label': 'Qualified'}
  ]
#}
{% macro status_breakdown_grid(title='', stats_list=[], cols=4) %}
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-{{ cols }} gap-6">
  {% for stat in stats_list %}
    <div class="card p-4 bg-white hover:shadow-md transition-shadow duration-200">
      <div class="text-center">
        <dt class="text-sm font-medium text-gray-500 truncate">
          {{ stat.label }}
        </dt>
        <dd class="mt-1 text-2xl font-semibold text-{{ stat.value_color }}-600">
          {{ stat.value }}
        </dd>
      </div>
    </div>
  {% endfor %}
</div>
{% endmacro %}