{% from "macros/core/entity_helpers.html" import entity_icon, entity_display_name %}
{% from "macros/base/icons.html" import icon %}


{% macro entity_buttons(entity_names) %}
<div class="button-container">
    {% for entity in entity_names %}
    {# Proper pluralization mapping #}
    {% set singular_map = {
        'companies': 'company',
        'tasks': 'task',
        'opportunities': 'opportunity',
        'stakeholders': 'stakeholder',
        'teams': 'team'
    } %}
    {# Direct icon mapping #}
    {% set icon_map = {
        'company': 'building-office-alt',
        'task': 'clipboard-list',
        'opportunity': 'currency-dollar-circle',
        'stakeholder': 'user',
        'team': 'users'
    } %}
    {% set singular = singular_map.get(entity, entity.rstrip('s')) %}
    {% set singular_title = singular.title() %}
    {% set icon_name = icon_map.get(singular, 'document') %}
    <button hx-get="/modals/{{ singular_title }}/create"
            hx-target="body"
            hx-swap="beforeend"
            class="flex items-center gap-2 btn-{{ singular }}">
        {{ icon(icon_name, 'sm') }}
        New {{ singular.title() }}
    </button>
    {% endfor %}
</div>
{% endmacro %}

{% macro default_dashboard_actions() %}
{# Default dashboard buttons - Generated from model configurations #}
{{ entity_buttons(get_dashboard_action_buttons()) }}
{% endmacro %}

{# 
  Page-specific action button macros removed - now handled by EntityConfigGenerator
  in form_configs.py for true DRY implementation. All entity pages use the 
  entity_buttons context variable generated automatically from model __entity_config__.
#}