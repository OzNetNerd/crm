{% from "macros/ui/summary_section.html" import status_breakdown_grid %}
{% from "macros/formatting.html" import format_currency %}

{% macro dashboard_pipeline_section(pipeline_stats) %}
{# Dashboard-specific pipeline section - only for dashboard use #}
{% set pipeline_stats_list = [
  {
    'value': format_currency(pipeline_stats.prospect), 
    'value_color': 'green', 
    'label': 'Prospect'
  },
  {
    'value': format_currency(pipeline_stats.qualified), 
    'value_color': 'blue', 
    'label': 'Qualified'
  },
  {
    'value': format_currency(pipeline_stats.proposal), 
    'value_color': 'yellow', 
    'label': 'Proposal'
  },
  {
    'value': format_currency(pipeline_stats.negotiation), 
    'value_color': 'orange', 
    'label': 'Negotiation'
  }
] %}

<div class="relative p-8 mb-8 bg-gradient-to-br from-white via-green-50 to-blue-50 rounded-2xl border border-white/50 backdrop-blur-xl shadow-xl overflow-hidden">
  <!-- Background decoration -->
  <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-green-500/10 to-blue-500/10 rounded-full blur-2xl"></div>

  <div class="relative z-10">
    <h2 class="text-3xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent mb-3">Sales Pipeline</h2>
    <p class="text-lg font-semibold text-gray-700 mb-6">Total: {{ format_currency(pipeline_stats.total_value) }} ({{ pipeline_stats.total_count }} opportunities)</p>

    <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
      {% for stat in pipeline_stats_list %}
      <div class="text-center p-6 bg-white/80 backdrop-blur-sm rounded-xl border border-white/40 hover:bg-white/90 transition-all duration-300 hover:scale-105 hover:shadow-lg">
        <div class="text-2xl font-bold text-{{ stat.value_color }}-600 mb-2">{{ stat.value }}</div>
        <div class="text-sm font-semibold text-gray-600 uppercase tracking-wider">{{ stat.label }}</div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endmacro %}