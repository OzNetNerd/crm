{% from 'macros/base/icons.html' import icon %}
{% macro confirmation_modal(modal_id, default_title="Confirm Action", notification_type="warning", show_cancel=true) %}
<div x-data="{ 
        show: false, 
        title: '{{ default_title }}', 
        message: '', 
        confirmText: 'Confirm', 
        confirmAction: null,
        confirmClass: 'bg-blue-600 hover:bg-blue-700'
     }" 
     x-cloak 
     @open-confirmation-modal.window="
        show = true; 
        title = $event.detail.title || '{{ default_title }}';
        message = $event.detail.message || '';
        confirmText = $event.detail.confirmText || 'Confirm';
        confirmAction = $event.detail.confirmAction;
        confirmClass = $event.detail.confirmClass || 'bg-blue-600 hover:bg-blue-700';
     "
     @close-confirmation-modal.window="show = false"
     x-show="show"
     class="fixed inset-0 z-50 overflow-y-auto hidden"
     x-transition:enter="ease-out duration-300"
     x-transition:enter-start="opacity-0"
     x-transition:enter-end="opacity-100"
     x-transition:leave="ease-in duration-200"
     x-transition:leave-start="opacity-100"
     x-transition:leave-end="opacity-0">
    
    <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-4 text-center">
        <div class="modal-backdrop fixed inset-0 bg-black bg-opacity-50" @click="show = false"></div>
        
        <div class="modal-content inline-block align-middle bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all max-w-lg w-full mx-4">
            <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                <div class="sm:flex sm:items-start">
                    {% set icon_classes = {
                        'warning': 'bg-yellow-100 text-yellow-600',
                        'error': 'bg-red-100 text-red-600', 
                        'success': 'bg-green-100 text-green-600',
                        'info': 'bg-blue-100 text-blue-600'
                    } %}
                    <div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full {{ icon_classes[notification_type] }} sm:mx-0 sm:h-10 sm:w-10">
                        {% if notification_type == 'warning' %}
                        {{ icon('exclamation-triangle', 'lg') }}
                        {% elif notification_type == 'error' %}
                        {{ icon('x-mark', 'lg') }}
                        {% elif notification_type == 'success' %}
                        {{ icon('check', 'lg') }}
                        {% elif notification_type == 'info' %}
                        {{ icon('information-circle', 'lg') }}
                        {% endif %}
                    </div>
                    <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                        <h3 class="text-lg leading-6 font-medium text-gray-900" x-text="title"></h3>
                        <div class="mt-2">
                            <p class="text-secondary" x-text="message"></p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                <button @click="confirmAction && confirmAction(); show = false" 
                        class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white sm:ml-3 sm:w-auto sm:text-sm transition-colors duration-200"
                        :class="confirmClass"
                        x-text="confirmText">
                </button>
                {% if show_cancel %}
                <button @click="show = false" 
                        class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                    Cancel
                </button>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endmacro %}