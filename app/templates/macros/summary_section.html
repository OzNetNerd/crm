{# Summary Section - Reusable metric display components #}

{#
  Metric Grid - Standardized grid layout for displaying key statistics
  
  Parameters:
  - title (required): Section heading (e.g., "Task Summary", "Pipeline Summary")
  - stats (required): Array of stat objects with value, label, and optional color_class
  - columns (optional): Number of columns for grid - 2, 3, or 4 (default: 4)
  - additional_classes (optional): Extra CSS classes for container
  
  Usage:
  {{ metric_grid("Pipeline Summary", pipeline_stats, columns=4) }}
  
  Stats object format:
  {
    'value': '$514,367',
    'label': 'Prospect', 
    'color_class': 'text-green-600'  # optional
  }
#}
{% macro metric_grid(title, stats, columns=4, additional_classes='', entity_name=None) %}
{% set grid_classes = {
  2: 'grid-cols-2',
  3: 'grid-cols-3', 
  4: 'grid-cols-2 md:grid-cols-4'
} %}
{% set grid_class = grid_classes.get(columns, grid_classes[4]) %}

<div class="card-padded-lg {{ additional_classes }}">
    <h2 class="text-section-title mb-4">{{ title }}</h2>
    <div class="grid {{ grid_class }} gap-4">
        {% for stat in stats %}
        <div class="text-center">
            <div class="text-2xl font-bold {{ ('text-color-' + entity_name) if entity_name else 'text-gray-900' }}">
                {{ stat.value }}
            </div>
            <div class="text-secondary">{{ stat.label }}</div>
        </div>
        {% endfor %}
    </div>
</div>
{% endmacro %}

{#
  Simple Metric Card - Individual metric display card
  
  Parameters:
  - label (required): Metric description (e.g., "Total Tasks", "Revenue")
  - value (required): Main metric value (e.g., "42", "$1,234")
  - icon (optional): Icon HTML to display (e.g., building_office_icon())
  - color (optional): Color theme for the card (e.g., "blue", "green")
  - additional_classes (optional): Extra CSS classes for container
#}
{% macro metric_card(label, value, icon='', color='', additional_classes='') %}
<div class="text-center p-6 bg-white rounded-lg shadow {{ additional_classes }}">
    {% if icon %}
    <div class="flex justify-center mb-2">
        {{ icon|safe }}
    </div>
    {% endif %}
    <div class="text-2xl font-bold {{ ('text-' + color + '-600') if color else 'text-gray-900' }} mb-1">
        {{ value }}
    </div>
    <div class="text-secondary">{{ label }}</div>
</div>
{% endmacro %}

{#
  Status Breakdown Grid - Specialized grid for status/stage breakdowns
  
  Parameters:
  - title (required): Section heading
  - items (required): Array of status items with name, count, color
  - show_percentages (optional): Show percentage alongside count (default: false)
  
  Item object format:
  {
    'name': 'Prospect',
    'count': 15,
    'color': 'green',  # maps to text-{color}-600 and bg-{color}-100
    'percentage': 45.2  # optional, shown if show_percentages=true
  }
#}
{% macro status_breakdown_grid(title, items, show_percentages=false, additional_classes='') %}
<div class="card-padded-lg {{ additional_classes }}">
    <h2 class="text-section-title mb-4">{{ title }}</h2>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        {% for item in items %}
        <div class="text-center">
            <div class="flex items-center justify-center mb-2">
                <div class="w-3 h-3 rounded-full bg-{{ item.color }}-500 mr-2"></div>
                <span class="text-sm font-medium text-gray-700">{{ item.name }}</span>
            </div>
            <div class="text-xl font-bold text-{{ item.color }}-600">
                {{ item.count }}
                {% if show_percentages and item.percentage %}
                <span class="text-secondary font-normal">({{ item.percentage }}%)</span>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endmacro %}