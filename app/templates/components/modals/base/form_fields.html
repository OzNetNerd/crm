{% macro text_input(name, label, model_var, placeholder="", required=false, type="text") %}
<div class="form-field">
    <label class="form-label{% if required %} form-label-required{% endif %}">{{ label }}</label>
    <input type="{{ type }}" 
           x-model="{{ model_var }}" 
           placeholder="{{ placeholder }}"
           class="form-input"
           {% if required %}required{% endif %}>
</div>
{% endmacro %}

{% macro textarea_input(name, label, model_var, placeholder="", rows=2, required=false) %}
<div class="form-field">
    <label class="form-label{% if required %} form-label-required{% endif %}">{{ label }}</label>
    <textarea x-model="{{ model_var }}" 
              placeholder="{{ placeholder }}"
              class="form-textarea"
              rows="{{ rows }}"
              {% if required %}required{% endif %}></textarea>
</div>
{% endmacro %}

{% from "components/ui_elements.html" import universal_dropdown %}

{% macro select_input(name, label, model_var, options, required=false, empty_option="") %}
<div class="form-field">
    {%- set dropdown_options = [] -%}
    {%- if empty_option -%}
        {%- set _ = dropdown_options.append({'value': '', 'label': empty_option}) -%}
    {%- endif -%}
    {%- for option in options -%}
        {%- if option is mapping -%}
            {%- set _ = dropdown_options.append(option) -%}
        {%- else -%}
            {%- set _ = dropdown_options.append({'value': option, 'label': option|title}) -%}
        {%- endif -%}
    {%- endfor -%}
    
    {{ universal_dropdown(model_var, dropdown_options, 
                         label=label, 
                         label_class='form-label' + (' form-label-required' if required else ''),
                         classes='form-select') }}
</div>
{% endmacro %}

{% macro date_input(name, label, model_var, required=false) %}
<div class="form-field">
    <label class="form-label{% if required %} form-label-required{% endif %}">{{ label }}</label>
    <input type="date" 
           x-model="{{ model_var }}" 
           class="form-input"
           {% if required %}required{% endif %}>
</div>
{% endmacro %}

{% macro email_input(name, label, model_var, placeholder="email@example.com", required=false) %}
{{ text_input(name, label, model_var, placeholder, required, "email") }}
{% endmacro %}

{% macro tel_input(name, label, model_var, placeholder="Phone number", required=false) %}
{{ text_input(name, label, model_var, placeholder, required, "tel") }}
{% endmacro %}

{% macro url_input(name, label, model_var, placeholder="https://example.com", required=false) %}
{{ text_input(name, label, model_var, placeholder, required, "url") }}
{% endmacro %}

{% macro grid_2_columns(left_content, right_content) %}
<div class="grid grid-cols-2 gap-4">
    <div>{{ left_content }}</div>
    <div>{{ right_content }}</div>
</div>
{% endmacro %}

{% macro form_section(title, content) %}
{% if title %}
<div class="space-y-5">
    <h4 class="text-md font-semibold text-gray-900 pb-2 border-b border-gray-100">{{ title }}</h4>
    {{ content }}
</div>
{% else %}
<div class="space-y-5">
    {{ content }}
</div>
{% endif %}
{% endmacro %}

{% macro radio_group(name, label, model_var, options, required=false) %}
<div class="form-field">
    <label class="form-label{% if required %} form-label-required{% endif %}">{{ label }}</label>
    <div class="modal-radio-group">
        {% for option in options %}
        <label class="modal-radio-label">
            <input type="radio" x-model="{{ model_var }}" value="{{ option.value if option is mapping else option }}" 
                   class="form-radio"
                   {% if required %}required{% endif %}>
            <span class="modal-radio-text">{{ option.label if option is mapping else option|title }}</span>
        </label>
        {% endfor %}
    </div>
</div>
{% endmacro %}