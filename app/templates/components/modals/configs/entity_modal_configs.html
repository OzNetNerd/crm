{# Entity Modal Configurations - Detail Modal Configs Only #}

{# Task Detail Modal Configuration #}
{% set task_detail_config = {
    "title": "Task Details",
    "default_values": {
        "description": "",
        "due_date": "",
        "priority": "medium",
        "next_step_type": "",
        "status": "pending"
    },
    "tabs": [
        {
            "key": "details",
            "label": "Details"
        },
        {
            "key": "subtasks",
            "label": "Sub-tasks",
            "condition": "task.task_type === 'parent'",
            "badge": "task.child_tasks ? task.child_tasks.length : 0",
            "content": '''
                <template x-for="childTask in task.child_tasks" :key="childTask.id">
                    <div class="p-3 border border-gray-200 rounded-lg">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3 flex-grow">
                                <input type="checkbox" 
                                       :checked="childTask.status === \"complete\""
                                       @change="toggleChildTask(childTask.id)"
                                       class="text-blue-600 focus:ring-blue-500 border-gray-300">
                                <div class="flex-grow">
                                    <p class="text-sm font-medium text-gray-900" x-text="childTask.description"></p>
                                    <div class="flex items-center space-x-4 text-xs-gray-500 mt-1">
                                        <span x-show="childTask.due_date" x-text="new Date(childTask.due_date).toLocaleDateString()"></span>
                                        <span class="capitalize" x-text="childTask.priority"></span>
                                        <span x-show="childTask.next_step_type" class="uppercase" x-text="childTask.next_step_type"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span :class="childTask.status === \"complete\" ? \"bg-green-100 text-green-800\" : \"bg-gray-100 text-gray-800\""
                                      class="px-2 py-1 text-xs font-medium rounded-full capitalize" 
                                      x-text="childTask.status.replace(\"_\", \" \")"></span>
                            </div>
                        </div>
                    </div>
                </template>
                
                <div x-show="!task.child_tasks || task.child_tasks.length === 0" 
                     class="text-gray-500 text-sm italic text-center py-4">
                    No sub-tasks
                </div>
            '''
        },
        {
            "key": "notes",
            "label": "Notes",
            "badge": "notes.length"
        }
    ],
    "fields": [
        {
            "type": "textarea",
            "name": "description",
            "label": "Description",
            "rows": 3
        }
    ]
} %}

{# Contact Detail Modal Configuration #}
{% set contact_detail_config = {
    "title": "Contact Details",
    "show_notes": true,
    "default_values": {
        "name": "",
        "email": "",
        "phone": "",
        "role": "",
        "company": null
    },
    "fields": [
        {
            "type": "text",
            "name": "name",
            "label": "Full Name",
            "placeholder": "Contact name"
        }
    ]
} %}

{# Company Detail Modal Configuration #}
{% set company_detail_config = {
    "title": "Company Details",
    "show_notes": true,
    "default_values": {
        "name": "",
        "industry": "",
        "website": "",
        "contacts": [],
        "opportunities": []
    },
    "fields": [
        {
            "type": "text",
            "name": "name",
            "label": "Company Name",
            "placeholder": "Company name"
        }
    ]
} %}

{# Opportunity Detail Modal Configuration #}
{% set opportunity_detail_config = {
    "title": "Opportunity Details",
    "show_notes": true,
    "default_values": {
        "name": "",
        "value": "",
        "stage": "",
        "probability": 0,
        "expected_close_date": "",
        "company": null
    },
    "fields": [
        {
            "type": "text",
            "name": "name",
            "label": "Opportunity Name",
            "placeholder": "Opportunity name"
        }
    ]
} %}