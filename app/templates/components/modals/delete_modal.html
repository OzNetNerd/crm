{% from 'macros/ui.html' import icon %}
{#
Delete Confirmation Modal - DRY Version
Simple confirmation dialog following existing modal patterns
#}

<div class="modal"
     x-data="{
         open: true,
         dragPosition: { x: 0, y: 0 },
         close() {
             if (window.ModalDraggable) {
                 const modalContent = document.querySelector('#{{ model_name }}-delete-modal .modal-content');
                 if (modalContent) window.ModalDraggable.resetModalPosition(modalContent);
             }
             htmx.ajax('GET', '/modals/close', {target: '#modal-container', swap: 'innerHTML'});
         }
     }"
     x-show="open"
     id="{{ model_name }}-delete-modal"
>

    <div class="modal-backdrop" @click="close()"></div>

    <div class="modal-content modal-content-sm">
        <!-- Header -->
        <div class="modal-header">
            <h3 class="modal-title">
                {{ icon('exclamation-triangle', size='5', class='inline-block mr-2 text-red-600') }}
                {{ modal_title }}
            </h3>
            <button type="button"
                    class="modal-close"
                    hx-get="/modals/close"
                    hx-swap="innerHTML"
                    hx-target="#modal-container">
                {{ icon('x-mark') }}
            </button>
        </div>

        <!-- Body -->
        <div class="modal-body">
            <p class="text-gray-700 mb-6">
                Are you sure you want to delete this {{ model_name }}? This action cannot be undone.
            </p>

            {% if entity %}
            <div class="bg-gray-50 p-3 rounded mb-6">
                <strong>{{ entity.get_display_title() }}</strong>
            </div>
            {% endif %}
        </div>

        <!-- Footer -->
        <div class="modal-footer">
            <button type="button"
                    class="btn btn-secondary"
                    hx-get="/modals/close"
                    hx-swap="innerHTML"
                    hx-target="#modal-container">
                Cancel
            </button>
            <button type="button"
                    class="btn btn-danger"
                    hx-post="/modals/{{ model_name }}/{{ entity_id }}/delete"
                    hx-swap="innerHTML"
                    hx-target="#modal-container">
                {{ icon('trash', size='4', class='inline-block mr-2') }}
                Delete
            </button>
        </div>
    </div>
</div>