{# List Section Macros - Reusable containers and items for dashboard lists #}

{#
  List Section Container - Call macro for wrapping list content
  
  Parameters:
  - title (required): Section heading text
  - href (optional): URL to make title clickable
  - theme_color (optional): Background theme - white (default), red, yellow, blue
  - icon_macro (optional): Icon macro call to display next to title
  - additional_classes (optional): Extra CSS classes for container
#}
{% macro list_section(title, href=None, theme_color='white', icon_macro=None, additional_classes='') %}
  {% set theme_classes = {
    'white': 'bg-white border',
    'red': 'bg-red-50 border border-red-200',
    'yellow': 'bg-yellow-50 border border-yellow-200', 
    'blue': 'bg-blue-50 border border-blue-200'
  } %}
  {% set title_classes = {
    'white': 'text-gray-900 hover:text-gray-700',
    'red': 'text-red-800 hover:text-red-900',
    'yellow': 'text-yellow-800 hover:text-yellow-900',
    'blue': 'text-blue-800 hover:text-blue-900'
  } %}
  {% set bg_class = theme_classes.get(theme_color, theme_classes['white']) %}
  {% set title_class = title_classes.get(theme_color, title_classes['white']) %}
  {% set container_tag = 'a' if href else 'h3' %}
  {% set container_attrs = 'href="' + href + '"' if href else '' %}
  {% set hover_classes = 'hover:underline transition-all duration-200' if href else '' %}
  
  <div class="{{ bg_class }} rounded-lg shadow-sm p-6 {{ additional_classes }}">
    <{{ container_tag }} {{ container_attrs|safe }} class="text-lg font-semibold {{ title_class }} mb-4 {{ hover_classes }} {{ 'flex items-center gap-2' if icon_macro else 'block' }}">
      {% if icon_macro %}{{ icon_macro }}{% endif %}{{ title }}
    </{{ container_tag }}>
    <div class="space-y-3">
      {{ caller() }}
    </div>
  </div>
{% endmacro %}

{#
  Simple List Item - Standard two-column layout with badge
  
  Parameters:
  - title (required): Main item text
  - subtitle (required): Secondary text (company, date, etc.)
  - badge_text (required): Status/category text
  - badge_color (optional): Badge color - gray (default), red, yellow, green, blue, orange
  - additional_classes (optional): Extra CSS classes for item
#}
{% macro simple_list_item(title, subtitle, badge_text, badge_color='gray', additional_classes='') %}
  {% set badge_classes = {
    'gray': 'bg-gray-100 text-gray-800',
    'red': 'bg-red-100 text-red-800',
    'yellow': 'bg-yellow-100 text-yellow-800',
    'green': 'bg-green-100 text-green-800',
    'blue': 'bg-blue-100 text-blue-800',
    'orange': 'bg-orange-100 text-orange-800'
  } %}
  {% set badge_class = badge_classes.get(badge_color, badge_classes['gray']) %}
  
  <div class="flex items-center justify-between bg-white p-3 rounded border {{ additional_classes }}">
    <div>
      <div class="text-sm font-medium text-gray-900">{{ title }}</div>
      <div class="text-xs text-gray-500 mt-1">{{ subtitle }}</div>
    </div>
    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium {{ badge_class }}">
      {{ badge_text }}
    </span>
  </div>
{% endmacro %}

{#
  Alert List Item - For urgent/overdue items with colored text
  
  Parameters:
  - title (required): Main item text
  - warning_text (required): Urgent info text (due dates, amounts, etc.)
  - warning_color (optional): Warning text color - red (default), yellow, orange
  - action_href (optional): URL for action link
  - additional_classes (optional): Extra CSS classes for item
#}
{% macro alert_list_item(title, warning_text, warning_color='red', action_href=None, additional_classes='') %}
  {% set warning_classes = {
    'red': 'text-red-600',
    'yellow': 'text-yellow-600',
    'orange': 'text-orange-600'
  } %}
  {% set action_classes = {
    'red': 'text-red-600 hover:text-red-800',
    'yellow': 'text-yellow-600 hover:text-yellow-800',
    'orange': 'text-orange-600 hover:text-orange-800'
  } %}
  {% set warning_class = warning_classes.get(warning_color, warning_classes['red']) %}
  {% set action_class = action_classes.get(warning_color, action_classes['red']) %}
  
  <div class="flex items-center justify-between bg-white p-3 rounded border {{ additional_classes }}">
    <div>
      <div class="text-sm font-medium text-gray-900">{{ title }}</div>
      <div class="text-xs {{ warning_class }} mt-1">{{ warning_text }}</div>
    </div>
    {% if action_href %}
    <a href="{{ action_href }}" class="{{ action_class }} text-sm font-medium">
    </a>
    {% endif %}
  </div>
{% endmacro %}

{#
  Note List Item - For notes/comments with left border accent
  
  Parameters:
  - content (required): Note content text
  - metadata (required): Date and entity info
  - accent_color (optional): Left border color - blue (default), green, yellow, red
  - additional_classes (optional): Extra CSS classes for item
#}
{% macro note_list_item(content, metadata, accent_color='blue', additional_classes='') %}
  {% set accent_classes = {
    'blue': 'border-blue-500',
    'green': 'border-green-500',
    'yellow': 'border-yellow-500',
    'red': 'border-red-500'
  } %}
  {% set accent_class = accent_classes.get(accent_color, accent_classes['blue']) %}
  
  <div class="bg-white p-3 rounded border {{ additional_classes }}">
    <div class="border-l-4 {{ accent_class }} pl-4">
      <p class="text-sm font-medium text-gray-900">{{ content }}</p>
      <p class="text-xs text-gray-500 mt-1">{{ metadata }}</p>
    </div>
  </div>
{% endmacro %}

{#
  Simple variants for common use cases
#}
{% macro simple_list_section(title, items, href=None) %}
  {% call list_section(title, href=href) %}
    {% for item in items %}
      {{ simple_list_item(item.title, item.subtitle, item.badge_text, item.badge_color) }}
    {% endfor %}
  {% endcall %}
{% endmacro %}