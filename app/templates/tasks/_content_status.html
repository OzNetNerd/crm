{# Status-based Task Grouping - Alpine.js Rendered #}
{% from "components/task_card.html" import render_task, render_task_hierarchy %}
{% from "components/ui_elements.html" import section_group_header %}
{% from "components/icons.html" import clipboard_list_icon, bolt_icon, check_circle_icon_solid %}

<div class="space-y-4">
    <!-- To Do Tasks -->
    <div class="card">
        {{ section_group_header('todo', 'To Do', clipboard_list_icon("w-5 h-5 mr-1"), '<span class="ml-2 badge-standard badge-blue" x-text="getTasksByStatus(\'todo\').length"></span>', 'blue', 'blue', 'blue', 'text-status-header') }}
        <div class="p-6" x-show="expandedSections['todo']" x-cloak x-transition>
            <template x-for="task in getTasksByStatus('todo')" :key="task.id">
                <div x-html="renderTaskCard(task, 'todo')"></div>
            </template>
            <div x-show="getTasksByStatus('todo').length === 0" class="text-empty-state">
                No matching tasks found
            </div>
        </div>
    </div>

    <!-- In Progress Tasks -->
    <div class="card">
        {{ section_group_header('in-progress', 'In Progress', bolt_icon("w-5 h-5 mr-1"), '<span class="ml-2 badge-standard badge-yellow" x-text="getTasksByStatus(\'in-progress\').length"></span>', 'yellow', 'yellow', 'yellow', 'text-status-header') }}
        <div class="p-6" x-show="expandedSections['in-progress']" x-cloak x-transition>
            <template x-for="task in getTasksByStatus('in-progress')" :key="task.id">
                <div x-html="renderTaskCard(task, 'in-progress')"></div>
            </template>
            <div x-show="getTasksByStatus('in-progress').length === 0" class="text-empty-state">
                No matching tasks found
            </div>
        </div>
    </div>

    <!-- Completed Tasks (conditional) -->
    <div x-show="showCompleted" class="card">
        {{ section_group_header('complete', 'Completed', check_circle_icon_solid("w-5 h-5 mr-1"), '<span class="ml-2 badge-standard badge-green" x-text="getTasksByStatus(\'complete\').length"></span>', 'green', 'green', 'green', 'text-status-header') }}
        <div class="p-6" x-show="expandedSections['complete']" x-cloak x-transition>
            <template x-for="task in getTasksByStatus('complete')" :key="task.id">
                <div class="opacity-60" x-html="renderTaskCard(task, 'complete')"></div>
            </template>
            <div x-show="getTasksByStatus('complete').length === 0" class="text-empty-state">
                No matching tasks found
            </div>
        </div>
    </div>
</div>