{# Priority-based Task Grouping - Alpine.js Rendered #}
{% from "components/ui_elements.html" import section_group_header %}
{% from "components/icons.html" import fire_icon_solid, exclamation_triangle_icon, clipboard_list_icon %}

<div class="space-y-4">
    <!-- High Priority -->
    <div class="card-danger">
        {{ section_group_header('high', 'High Priority', fire_icon_solid("w-5 h-5 mr-1"), '<span class="ml-2 badge-standard badge-red" x-text="getTasksByPriority(\'high\').length"></span>', 'red', 'red', 'red', 'text-status-overdue') }}
        <div class="p-6" x-show="expandedSections['high']" x-cloak x-transition>
            <template x-for="task in getTasksByPriority('high')" :key="task.id">
                <div x-html="renderTaskCard(task, 'high')"></div>
            </template>
            <div x-show="getTasksByPriority('high').length === 0" class="text-empty-state">
                No matching tasks found
            </div>
        </div>
    </div>

    <!-- Medium Priority -->
    <div class="card-warning">
        {{ section_group_header('medium', 'Medium Priority', exclamation_triangle_icon("w-5 h-5 mr-1"), '<span class="ml-2 badge-standard badge-yellow" x-text="getTasksByPriority(\'medium\').length"></span>', 'yellow', 'yellow', 'yellow', 'text-status-warning') }}
        <div class="p-6" x-show="expandedSections['medium']" x-cloak x-transition>
            <template x-for="task in getTasksByPriority('medium')" :key="task.id">
                <div x-html="renderTaskCard(task, 'medium')"></div>
            </template>
            <div x-show="getTasksByPriority('medium').length === 0" class="text-empty-state">
                No matching tasks found
            </div>
        </div>
    </div>

    <!-- Low Priority -->
    <div class="card-success">
        {{ section_group_header('low', 'Low Priority', clipboard_list_icon("w-5 h-5 mr-1"), '<span class="ml-2 badge-standard badge-green" x-text="getTasksByPriority(\'low\').length"></span>', 'green', 'green', 'green', 'text-status-success') }}
        <div class="p-6" x-show="expandedSections['low']" x-cloak x-transition>
            <template x-for="task in getTasksByPriority('low')" :key="task.id">
                <div x-html="renderTaskCard(task, 'low')"></div>
            </template>
            <div x-show="getTasksByPriority('low').length === 0" class="text-empty-state">
                No matching tasks found
            </div>
        </div>
    </div>
</div>