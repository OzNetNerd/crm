{% extends "base/entity_index.html" %}

{# Task Index Template - Pure Configuration #}

{% block entity_config %}
{# Entity Configuration #}
{% set entity_name = "All Tasks" %}
{% set entity_description = "Manage all your tasks in one place" %}
{% set entity_type = "task" %}

{% set entity_stats = {
    'title': 'Task Summary',
    'stats': [
        {
            'value': tasks_objects|selectattr('status', 'equalto', 'todo')|list|length,
            'label': 'To Do',
            'color_class': 'text-blue-600'
        },
        {
            'value': tasks_objects|selectattr('status', 'equalto', 'in-progress')|list|length,
            'label': 'In Progress',
            'color_class': 'text-yellow-600'
        },
        {
            'value': tasks_objects|selectattr('status', 'equalto', 'complete')|list|length,
            'label': 'Complete',
            'color_class': 'text-green-600'
        },
        {
            'value': tasks_objects|selectattr('is_overdue', 'equalto', True)|list|length,
            'label': 'Overdue',
            'color_class': 'text-red-600'
        }
    ]
} %}

{% set entity_buttons = [
    {
        'label': 'New Task',
        'hx_get': '/modals/Task/create',
        'hx_target': 'body',
        'hx_swap': 'beforeend',
        'icon': plus_icon('w-4 h-4')
    }
] %}

{% set entity_filter_controls %}
{{ htmx_enhanced_filter_controls(
    group_options=group_options,
    sort_options=sort_options,
    show_completed_label='Show Completed',
    show_completed_name='show_completed',
    show_completed_value=show_completed,
    primary_filter_options=priority_options,
    primary_filter_label='All Priorities',
    primary_filter_values=priority_filter,
    entity_filter_options=entity_type_options,
    entity_filter_label='All Entities',
    entity_filter_values=entity_filter,
    group_by=group_by,
    sort_by=sort_by,
    sort_direction=sort_direction
) }}
{% endset %}
{% endblock %}

{% block modals %}
{{ confirmation_modal('task-confirmation-modal') }}
{{ include_common_modals() }}
{% endblock %}

{% block data_attributes %}
{# No longer need data attributes since using HTMX #}
{% endblock %}

{% block scripts %}
{# Tasks JavaScript still needed for specific functionality #}
<script src="{{ url_for('static', filename='js/features/tasks.js') }}"></script>
{% endblock %}