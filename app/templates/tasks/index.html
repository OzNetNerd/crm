{% extends "base/entity_index.html" %}

{% block entity_config %}
{% set entity_stats = {
    'title': 'Task Summary',
    'stats': [
        {
            'value': tasks_objects|selectattr('status', 'equalto', 'todo')|list|length,
            'label': 'To Do',
            'color_class': 'text-blue-600'
        },
        {
            'value': tasks_objects|selectattr('status', 'equalto', 'in-progress')|list|length,
            'label': 'In Progress', 
            'color_class': 'text-yellow-600'
        },
        {
            'value': tasks_objects|selectattr('status', 'equalto', 'complete')|list|length,
            'label': 'Complete',
            'color_class': 'text-green-600'
        },
        {
            'value': tasks_objects|selectattr('is_overdue', 'equalto', True)|list|length,
            'label': 'Overdue',
            'color_class': 'text-red-600'
        }
    ]
} %}
{% set entity_buttons = [
    {
        'label': 'New Task',
        'hx_get': '/modals/Task/create',
        'hx_target': 'body',
        'hx_swap': 'beforeend',
        'icon': plus_icon('w-4 h-4')
    }
] %}
{% endblock %}

{% block entity_filter_controls %}
{% from "macros/ui_elements.html" import config_driven_filter_controls %}
{{ config_driven_filter_controls(dropdown_configs, show_completed_toggle=true, expand_collapse_controls=true) }}
{% endblock %}

{% block entity_imports %}
{% from "macros/base/icons.html" import plus_icon %}
{% endblock %}

