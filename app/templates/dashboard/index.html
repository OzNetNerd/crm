{% extends "base/layout.html" %}
{% from "macros/base/layout.html" import page_layout %}
{% from "macros/dashboard/activity_section.html" import dashboard_overdue_section, dashboard_notes_section, dashboard_tasks_section, dashboard_opportunities_section %}


{% block title %}Dashboard - CRM{% endblock %}

{% block content %}
{% call page_layout(
    'Dashboard',
    'Overview of your CRM performance and activity',
    buttons=entity_types,
    summary_data=dashboard_stats
) %}

<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Top Row -->
    <div class="space-y-6">
        <!-- Top-left: Overdue Tasks -->
        {{ dashboard_overdue_section(overdue_tasks) }}
    </div>

    <div class="space-y-6">
        <!-- Top-right: Recent Notes -->
        {{ dashboard_notes_section(recent_notes) }}
    </div>

    <!-- Bottom Row -->
    <div class="space-y-6">
        <!-- Bottom-left: Recent Tasks -->
        {{ dashboard_tasks_section(recent_tasks) }}
    </div>

    <div class="space-y-6">
        <!-- Bottom-right: Recent Opportunities -->
        {{ dashboard_opportunities_section(recent_opportunities) }}
    </div>
</div>

{% endcall %}
{% endblock %}

{% block modals %}
<div id="modal-container"
     hx-target="this"
     hx-swap="innerHTML"
     role="dialog"
     aria-live="polite"
     aria-label="Modal dialogs"></div>
{% endblock %}

{% block scripts %}
{# Dashboard functionality now handled by HTML/CSS #}
{% endblock %}