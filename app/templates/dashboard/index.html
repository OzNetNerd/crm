{% extends "base/layout.html" %}
{% from "macros/imports/universal.html" import modal_container %}
{% from "macros/dashboard/pipeline_section.html" import dashboard_pipeline_section %}
{% from "macros/dashboard/activity_section.html" import dashboard_left_column, dashboard_right_column %}
{% from "macros/base/layout.html" import page_layout %}


{% block title %}Dashboard - CRM{% endblock %}

{% block content %}
{{ page_layout('Dashboard', 'Overview of your CRM performance and activity', buttons=entity_types, header_only=true) }}

{# Dashboard-specific content only - entity metrics belong in entity index pages #}
{{ dashboard_pipeline_section(pipeline_stats) }}

<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    <!-- Left Column: Overdue Tasks (top) + Recent Tasks (bottom) -->
    {{ dashboard_left_column(overdue_tasks, recent_tasks) }}

    <!-- Right Column: Closing Soon + Recent Notes (top) + Recent Opportunities (bottom) -->
    {{ dashboard_right_column(closing_soon, recent_notes, recent_opportunities) }}
</div>
{% endblock %}

{% block modals %}
{{ modal_container() }}
{% endblock %}

{% block scripts %}
{# Dashboard functionality now handled by HTML/CSS #}
{% endblock %}