{% extends "base/layout.html" %}


{% block title %}Dashboard - CRM{% endblock %}

{% block content %}
<div class="page-container">
    <div class="page-header">
        <h1 class="page-title">Dashboard</h1>
        <p class="page-subtitle">Overview of your CRM performance and activity</p>
    </div>

    {% set sections = [
        {'title': 'Overdue Tasks', 'data': overdue_tasks, 'template': 'components/dashboard/activity_card.html', 'empty': 'No overdue tasks'},
        {'title': 'Recent Notes', 'data': recent_notes, 'template': 'components/notes/notes_display.html', 'empty': 'No recent notes'},
        {'title': 'Recent Tasks', 'data': recent_tasks, 'template': 'components/dashboard/activity_card.html', 'empty': 'No recent tasks'},
        {'title': 'Recent Opportunities', 'data': recent_opportunities, 'template': 'components/dashboard/activity_card.html', 'empty': 'No recent opportunities'}
    ] %}

    <div class="dashboard-grid">
        {% for section in sections %}
        <div class="dashboard-section">
            <h2 class="section-title">{{ section.title }}</h2>
            {% if section.data %}
                {% include section.template with context %}
            {% else %}
                <p class="text-muted">{{ section.empty }}</p>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block modals %}
<div id="modal-container"
     hx-target="this"
     hx-swap="innerHTML"
     role="dialog"
     aria-live="polite"
     aria-label="Modal dialogs"></div>
{% endblock %}

{% block scripts %}
{# Dashboard functionality now handled by HTML/CSS #}
{% endblock %}