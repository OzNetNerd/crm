{% extends "base/layout.html" %}
{% from "macros/imports/universal.html" import modal_container %}
{% from "macros/dashboard/pipeline_section.html" import dashboard_pipeline_section %}
{% from "macros/dashboard/activity_section.html" import dashboard_alerts_section, dashboard_recent_activity_section %}
{% from "macros/base/layout.html" import page_layout %}


{% block title %}Dashboard - CRM{% endblock %}

{% block content %}
{{ page_layout('Dashboard', 'Overview of your CRM performance and activity', buttons=entity_types, header_only=true) }}

{# Dashboard-specific content only - entity metrics belong in entity index pages #}
{{ dashboard_pipeline_section(pipeline_stats) }}

<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    <!-- Critical Alerts -->
    {{ dashboard_alerts_section(overdue_tasks, closing_soon) }}

    <!-- Recent Activity -->
    {{ dashboard_recent_activity_section(recent_tasks, recent_opportunities, recent_notes) }}
</div>
{% endblock %}

{% block modals %}
{{ modal_container() }}
{% endblock %}

{% block scripts %}
{# Dashboard functionality now handled by HTML/CSS #}
{% endblock %}