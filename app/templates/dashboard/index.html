{% extends "base/layout.html" %}
{% from "macros/imports/streamlined.html" import modal_container, simple_page_header %}
{% from "macros/dashboard/pipeline_section.html" import dashboard_pipeline_section %}
{% from "macros/dashboard/activity_section.html" import dashboard_overdue_section, dashboard_notes_section, dashboard_tasks_section, dashboard_opportunities_section %}


{% block title %}Dashboard - CRM{% endblock %}

{% block content %}
{{ simple_page_header('Dashboard', 'Overview of your CRM performance and activity', buttons=entity_types) }}

{# Dashboard-specific content only - entity metrics belong in entity index pages #}
{{ dashboard_pipeline_section(pipeline_stats) }}

<div class="grid-2">
    <!-- Top Row -->
    <div class="space-y-6">
        <!-- Top-left: Overdue Tasks -->
        {{ dashboard_overdue_section(overdue_tasks) }}
    </div>

    <div class="space-y-6">
        <!-- Top-right: Recent Notes -->
        {{ dashboard_notes_section(recent_notes) }}
    </div>

    <!-- Bottom Row -->
    <div class="space-y-6">
        <!-- Bottom-left: Recent Tasks -->
        {{ dashboard_tasks_section(recent_tasks) }}
    </div>

    <div class="space-y-6">
        <!-- Bottom-right: Recent Opportunities -->
        {{ dashboard_opportunities_section(recent_opportunities) }}
    </div>
</div>
{% endblock %}

{% block modals %}
{{ modal_container() }}
{% endblock %}

{% block scripts %}
{# Dashboard functionality now handled by HTML/CSS #}
{% endblock %}