{% from 'macros/base/icons.html' import icon %}
{% macro confirmation_modal(modal_id, default_title="Confirm Action", notification_type="warning", show_cancel=true) %}
<div x-data="{
        show: false,
        title: '{{ default_title }}',
        message: '',
        confirmText: 'Confirm',
        confirmAction: null,
        confirmClass: 'btn-primary'
     }"
     x-cloak
     @open-confirmation-modal.window="
        show = true;
        title = $event.detail.title || '{{ default_title }}';
        message = $event.detail.message || '';
        confirmText = $event.detail.confirmText || 'Confirm';
        confirmAction = $event.detail.confirmAction;
        confirmClass = $event.detail.confirmClass || 'btn-primary';
     "
     @close-confirmation-modal.window="show = false"
     x-show="show"
     class="modal"
     x-transition:enter="ease-out duration-300"
     x-transition:enter-start="opacity-0"
     x-transition:enter-end="opacity-100"
     x-transition:leave="ease-in duration-200"
     x-transition:leave-start="opacity-100"
     x-transition:leave-end="opacity-0">

    <div class="modal-backdrop" @click="show = false"></div>

    <div class="modal-content modal-confirmation">
        <div class="modal-confirmation-content">
            {% set icon_classes = {
                'warning': 'modal-confirmation-icon-warning',
                'error': 'modal-confirmation-icon-error',
                'success': 'modal-confirmation-icon-success',
                'info': 'modal-confirmation-icon-info'
            } %}
            <div class="modal-confirmation-icon {{ icon_classes[notification_type] }}">
                {% if notification_type == 'warning' %}
                {{ icon('exclamation-triangle', 'lg') }}
                {% elif notification_type == 'error' %}
                {{ icon('x-mark', 'lg') }}
                {% elif notification_type == 'success' %}
                {{ icon('check', 'lg') }}
                {% elif notification_type == 'info' %}
                {{ icon('information-circle', 'lg') }}
                {% endif %}
            </div>
            <div class="modal-confirmation-text">
                <h3 class="modal-confirmation-title" x-text="title"></h3>
                <p class="modal-confirmation-message" x-text="message"></p>
            </div>
        </div>

        <div class="modal-confirmation-footer">
            <button @click="confirmAction && confirmAction(); show = false"
                    class="btn"
                    :class="confirmClass"
                    x-text="confirmText">
            </button>
            {% if show_cancel %}
            <button @click="show = false"
                    class="btn btn-secondary">
                Cancel
            </button>
            {% endif %}
        </div>
    </div>
</div>
{% endmacro %}