{% extends "base/layout.html" %}
{% from "macros/components.html" import confirmation_modal, entity_dropdown_controls %}

{% block title %}{{ entity_config.entity_name }} - CRM{% endblock %}

{% block content %}
<div class="page-container">
    {# Page Header #}
    <div class="page-header">
        <h1 class="page-title">{{ entity_config.entity_name }}</h1>
        {% if entity_config.entity_description %}
            <p class="page-subtitle">{{ entity_config.entity_description }}</p>
        {% endif %}

        {# Action Buttons #}
        {% if entity_config.entity_buttons %}
        <div class="page-actions">
            {% for button in entity_config.entity_buttons %}
                <a href="{{ button.url }}" class="btn btn-{{ button.variant|default('primary') }}">
                    {{ button.title }}
                </a>
            {% endfor %}
        </div>
        {% endif %}
    </div>

    {# Stats Cards #}
    {% if entity_stats %}
    <div class="stats-grid">
        {% for stat in entity_stats %}
        <div class="stat-card">
            <div class="stat-value">{{ stat.value }}</div>
            <div class="stat-label">{{ stat.label }}</div>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    {# Filters #}
    {% if dropdown_configs %}
    <div class="filter-section">
        <form hx-get="{{ url_for(entity_config.content_endpoint) }}"
              hx-target="#entity-content"
              hx-trigger="change"
              class="flex flex-wrap gap-3">
            {{ entity_dropdown_controls(dropdowns=dropdown_configs) }}
        </form>
    </div>
    {% endif %}

    {# Content Area #}
    <div id="entity-content"
         hx-get="{{ url_for(entity_config.content_endpoint) }}"
         hx-trigger="load"
         class="content-area">
        <div class="loading">
            <div class="flex items-center justify-center py-8">
                <div class="text-gray-500">Loading {{ entity_config.entity_name|lower }}...</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block modals %}
{# Confirmation modal removed - not actively used #}
{% endblock %}