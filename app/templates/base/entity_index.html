{% extends "base/layout.html" %}
{% from "macros/components.html" import confirmation_modal, filter_controls %}

{% block title %}{{ entity_config.entity_name }} - CRM{% endblock %}

{% block content %}
<div class="page-container">
    {# Page Header #}
    <div class="page-header">
        <h1 class="page-title">{{ entity_config.entity_name }}</h1>
        <p class="page-subtitle">{{ entity_config.entity_description }}</p>

        {# Action Buttons #}
        {% if entity_buttons %}
        <div class="page-actions">
            {% for button in entity_buttons %}
                <a href="{{ button.url }}" class="btn btn-{{ button.variant|default('primary') }}">
                    {{ button.text }}
                </a>
            {% endfor %}
        </div>
        {% endif %}
    </div>

    {# Stats Cards #}
    {% if entity_stats %}
    <div class="stats-grid">
        {% for stat in entity_stats %}
        <div class="stat-card">
            <div class="stat-value">{{ stat.value }}</div>
            <div class="stat-label">{{ stat.label }}</div>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    {# Filters #}
    <div class="filter-section">
        <form hx-get="{{ url_for(entity_config.content_endpoint) }}"
              hx-target="#entity-content"
              hx-trigger="change">

            {# Simple filter controls #}
            {{ filter_controls(filters=dropdown_configs) if dropdown_configs else '' }}
        </form>
    </div>

    {# Content Area #}
    <div id="entity-content"
         hx-get="{{ url_for(entity_config.content_endpoint) }}"
         hx-trigger="load"
         class="content-area">
        <div class="loading">
            Loading {{ entity_config.entity_name|lower }}...
        </div>
    </div>
</div>
{% endblock %}

{% block modals %}
{# Confirmation modal removed - not actively used #}
{% endblock %}